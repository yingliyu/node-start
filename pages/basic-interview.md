# Nodejs 面试题

## NPM 安装依赖的时候是如何处理依赖冲突问题的？

## peerDependency 是起到了怎样的作用？

## Nodejs 事件循环

## 进程和线程

> 进程（Process）负责为程序的运行提供必备的环境。

> 线程（Thread）是计算机中最小的计算单位，线程负责执行进程中的程序。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。

### 单线程

JS 是单线程

### 多线程

优点：

- 能适当提高程序的执行效率
- 能适当提高资源的利用率（CPU，内存）
- 线程上的任务执行完成后，线程会自动销毁

缺点：

- 开启线程需要占用一定的内存空间（默认情况下，每一个线程都占 512 KB）
- 如果开启大量的线程，会占用大量的内存空间，降低程序的性能
- 线程越多，CPU 在调用线程上的开销就越大
- 程序设计更加复杂，比如线程间的通信、多线程的数据共享

### 进程和线程的区别和联系

进程有独立的地址空间，一个进程崩溃后，在保护模式下不会对其它进程产生影响，而线程只是一个进程中的不同执行路径。线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，所以多进程的程序要比多线程的程序健壮，但在进程切换时，耗费资源较大，效率要差一些。

线程是处理器调度的基本单位，但是进程不是。

- 地址空间：同一进程的线程共享本进程的地址空间，而进程之间则是独立的地址空间。
- 资源拥有：同一进程内的线程共享本进程的资源如内存、I/O、cpu 等，但是进程之间的资源是独立的。
- 一个进程崩溃后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃整个进程都死掉。所以多进程要比多线程健壮。
- 进程切换时，消耗的资源大，效率高。所以涉及到频繁的切换时，使用线程要好于进程。同样如果要求同时进行并且又要共享某些变量的并发操作，只能用线程不能用进程
- 执行过程：每个独立的进程有一个程序运行的入口、顺序执行序列和程序入口。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。

引用一个形象的比喻：进程=火车，线程=车厢

- 线程在进程下行进（单纯的车厢无法运行）
- 一个进程可以包含多个线程（一辆火车可以有多个车厢）
- 不同进程间数据很难共享（一辆火车上的乘客很难换到另外一辆火车，比如站点换乘）
- 同一进程下不同线程间数据很易共享（A 车厢换到 B 车厢很容易）
- 进程要比线程消耗更多的计算机资源（采用多列火车相比多个车厢更耗资源）
- 进程间不会相互影响，一个线程挂掉可能导致整个进程挂掉（一列火车不会影响到另外一列火车，但是如果一列火车上中间的一节车厢着火了，可能会影响到所有车厢）
- 进程可以拓展到多机，进程最适合多核（不同火车可以开在多个轨道上，同一火车的车厢不能在行进的不同的轨道上）
- 进程使用的内存地址可以上锁，即一个线程使用某些共享内存时，其他线程必须等它结束，才能使用这一块内存。（比如火车上的洗手间）－"互斥锁"
- 进程使用的内存地址可以限定使用量（比如火车上的餐厅，最多只允许多少人进入，如果满了需要在门口等，等有人出来了才能进去）－“信号量”
